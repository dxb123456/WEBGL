var Main=function(e){function t(){e.call(this);new SampleDirLight}__extends(t,e);var i=(__define,t);i.prototype;return t}(egret.DisplayObjectContainer);egret.registerClass(Main,"Main");var SampleDirLight=function(){function e(){this.lights=new egret3d.LightGroup,this._egret3DCanvas=new egret3d.Egret3DCanvas,this._egret3DCanvas.x=0,this._egret3DCanvas.y=0,this._egret3DCanvas.width=window.innerWidth,this._egret3DCanvas.height=window.innerHeight,this._view3D=new egret3d.View3D(0,0,window.innerWidth,window.innerHeight),this._view3D.camera3D.lookAt(new egret3d.Vector3D(0,0,-1e3),new egret3d.Vector3D(0,0,0)),this._view3D.backColor=4278190080,this._egret3DCanvas.addView3D(this._view3D);var e=(new egret3d.ColorMaterial(16711680),new egret3d.URLLoader);e.addEventListener(egret3d.LoaderEvent3D.LOADER_COMPLETE,this.onLoad,this),e.load("resource/laohu/dog.esm"),this.InitCameraCtl();var t=new egret3d.DirectLight(new egret3d.Vector3D(-.5,.6,.2));t.diffuse=16777215,this.lights.addLight(t),this._egret3DCanvas.start(),this._egret3DCanvas.addEventListener(egret3d.Event3D.ENTER_FRAME,this.update,this)}var t=(__define,e),i=t.prototype;return i.InitCameraCtl=function(){this.cameraCtl=new egret3d.LookAtController(this._view3D.camera3D,new egret3d.Object3D),this.cameraCtl.distance=1e3,this.cameraCtl.rotationX=60},i.onLoad=function(e){this.mat=new egret3d.TextureMaterial,this.mat.shininess=20,this.mat.ambientColor=16777215;var t=e.loader.data;this.model=new egret3d.Mesh(t,this.mat),t.vertexFormat&egret3d.VertexFormat.VF_SKIN&&(this.model.animation=new egret3d.SkeletonAnimation(t.skeleton)),this.model.material.lightGroup=this.lights,this._view3D.addChild3D(this.model);var i=new egret3d.URLLoader;i.addEventListener(egret3d.LoaderEvent3D.LOADER_COMPLETE,this.onLoadTexture,this),i.load("resource/laohu/dog.png")},i.onLoadTexture=function(e){this.mat.diffuseTexture=e.loader.data,e.loader.removeEventListener(egret3d.LoaderEvent3D.LOADER_COMPLETE,this.onLoadTexture,this)},i.update=function(e){this.cameraCtl.update()},e}();egret.registerClass(SampleDirLight,"SampleDirLight");